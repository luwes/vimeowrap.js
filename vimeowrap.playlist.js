!function(d,f){function i(t,e){this.config=w.extend(i.defaults,e),this.events={scroll:new l},this.el=w.query(t)||t,this.el.style.overflow="hidden",this.page=new h(this,this.el.children[0]),this.sbar=new p(this,this.page),this.el.appendChild(this.sbar.el),this.controllers=[],this.controllers.push(new r(this,this.page)),this.controllers.push(new c(this,this.page)),this.redraw(),this._redraw=w.bind(this.redraw,this),w.on(u,"resize",this._redraw)}function e(t){if(!(this instanceof e))return new e(t);this.el=b.query(t)||t,this.events={update:new n,end:new n},e.support.transition?this.engine=new o(this):this.engine=new s(this),this.duration(e.defaults.duration)}function n(){this.c=[]}function s(t){this.main=t,this.el=t.el,this._start={},this._end={}}function o(t){this.main=t,this.el=t.el,this._update=b.bind(this.update,this),this._end=b.bind(this.end,this),this.reset()}function r(t,e){this.main=t,this.page=e,this.y=0,t.events.scroll.on(function(t){this.y=parseFloat(t)},this),this._scroll=w.bind(this.scroll,this),w.on(t.el,"DOMMouseScroll mousewheel",this._scroll)}function h(t,e){this.main=t,this.el=e,this.morph=new Morph(e),this.morph.on("update",w.bind(this.update,this))}function a(t,e,i,n){this.main=t,this.page=e,this.sbar=i,this.hand=n,this._lock=w.bind(this.lock,this),this._drag=w.bind(this.drag,this),w.on(i,"mousedown touchstart",this._lock),w.on(n,"mousedown touchstart",this._lock),this.dragging=!1,this.offset=0}function p(t,e){this.main=t,this.page=e;var i=t.config.color,n=t.config.radius,s=t.config.width;this.el=g.createElement("div"),w.css(this.el,{position:"absolute",right:0,top:2,bottom:2,width:s+2,zIndex:90}),this.el.className="skinnyscrollbar",this.back=w.append(this.el,{backgroundColor:i,filter:"alpha(opacity=20)",opacity:"0.2",borderRadius:n,position:"absolute",left:0,top:0,bottom:0,width:s}),this.hand=w.append(this.el,{backgroundColor:i,filter:"alpha(opacity=40)",opacity:"0.4",borderRadius:n,position:"absolute",left:0,top:0,width:s,height:7}),new a(t,e,this.el,this.hand),t.events.scroll.on(this.y,this)}function l(){this.c=[]}function c(t,e){this.main=t,this.page=e,this.x=0,this.y=0,t.events.scroll.on(function(t){this.y=parseFloat(t)},this),w.on(e.el,"touchstart",this)}var u,g,y,m,v,b,w;vimeowrap.playlist=function(r,h){var o,s,a,p=this,t={position:"bottom",size:200,offsetx:2,offsety:2,autoplay:!1,template:"",style:"",thumb:{width:80,height:60}};function l(t){p.length=t.length;for(var e={striptags:function(t){return t.replace(/<\/?.*?>/g,"")},truncate:function(t,e){return t.length>e&&(t=t.slice(0,e)+"..."),t},timesince:function(t){for(var e=new Date(t.replace(/-/g,"/")).getTime(),i={second:((new Date).getTime()-e)/1e3},n=["second","minute","hour","day","week","month","year"],s=[1,60,60,24,7,4.34812,12],o=1;o<n.length;o++)if(i[n[o]]=i[n[o-1]]/s[o],i[n[o-1]]<s[o])return(t=Math.floor(i[n[o-1]]))+" "+n[o-1]+(1===t?"":"s");return(t=Math.floor(i[n[o-1]]))+" "+n[o-1]+(1===t?"":"s")},time:function(t){var e=Math.floor(t/3600),i=Math.floor(t%3600/60),n=Math.floor(t%3600%60);return(0===e?"":e+":")+i+":"+(n<10?"0"+n:n)}},i=[],n=h.template,s=0;s<t.length;s++)i.push("<li>"),i.push(n.populate(t[s],e)),i.push("</li>");f.getElementById(o.id+"_list").innerHTML=i.join(""),a.redraw()}function c(t){var e=t||d.event,i=e.target||e.srcElement;if(i&&"li"!==i.nodeName.toLowerCase())for(;i&&"li"!==(i=i.parentNode).nodeName.toLowerCase(););for(var n=0,s=i.parentNode.children,o=0;o<s.length&&s[n=o]!==i;o++);return n!==r.config.item&&r.playlistItem(n,h.autoplay),!1}function u(t,e){for(var i=s.children,n=0;n<i.length;n++)i[n].className=i[n].className.replace(/ ?selected/gi,"");i[e].className+=" selected"}t.template='<a href="{{url}}" title="{{title}}"><span class="shade"></span><span class="border"></span><img src="{{thumbnail_'+(h.thumb&&h.thumb.quality?h.thumb.quality:"small")+'}}" alt="" /><span class="title">{{title|truncate:30}}</span><span class="byline">from <b>{{user_name}}</b> <time datetime="{{upload_date}}">{{upload_date|timesince}} ago</time></span><span class="desc">{{description|striptags|truncate:50}}</span><span class="duration">{{duration|time}}</span></a>',h=vimeowrap.utils.extend(t,h),this.config=h,this.setup=function(){var t=["#{{id}} {background-color:#000; color:#fff; font:normal 12px/14px helvetica,arial,sans-serif; -webkit-tap-highlight-color:rgba(0,0,0,0);}","ul {list-style:none; margin:0; padding:0 9px 0 0;}","li {list-style:none; clear:both; display:block; height:{{thumb_height}}px; line-height:16px; margin:0 0 2px; padding:0; overflow:hidden;}","li:last-child {margin:0;}","li.selected {opacity:.4; filter:alpha(opacity=40);}","li:nth-child(odd) > a {background-color:rgba(255,255,255,.07);}","li > a {display:block; position:relative; height:{{thumb_height}}px; text-decoration:none;}","a:active, #{{id}} a:focus {outline:none;}","span {color:#fff; display:block;}",".shade {position:absolute; top:0; right:0; bottom:0; left:0;}","img {border:none; float:left; width:{{thumb_width}}px; height:{{thumb_height}}px; margin:0 7px 0 0;}",".border {box-sizing:border-box; -moz-box-sizing:border-box; -webkit-box-sizing:border-box; position:absolute; left:0; top:0; border-right:rgba(255, 255, 255, .1) 1px solid; width:{{thumb_width}}px; height:{{thumb_height}}px;}",".title {font-weight:bold; padding-top:5px; font-size:14px;}",".byline {color:#9DA2A8;}",".byline time {font-size:11px;}",".desc {color:#71767A;}",".duration {position:absolute; top:3px; right:7px;}"];"ontouchstart"in d?t.push("li .pressed {background-color:rgba(255,255,255,0.15);}"):(t.push("li > a:hover {background-color:rgba(255,255,255,0); text-decoration:none;}"),t.push("li > a:hover .shade {background-color:rgba(255,255,255,0.15);}")),t=t.join(" #{{id}} "),t+=h.style;var e=f.createTextNode(t.populate({id:r.id+"_playlist",color:r.config.color,thumb_width:h.thumb.width,thumb_height:h.thumb.height})),i=f.createElement("style");i.type="text/css",vimeowrap.utils.prepend(i,f.getElementsByTagName("head")[0]),i.styleSheet?i.styleSheet.cssText=e.nodeValue:i.appendChild(e),(o=f.createElement("div")).id=r.id+"_playlist",r.container.appendChild(o),vimeowrap.utils.css(o,{width:this.width,height:this.height,position:"absolute",left:this.x,top:this.y});var n=f.createElement("div");n.id=o.id+"_wrap",o.appendChild(n),vimeowrap.utils.css(n,{width:this.width-2*h.offsetx,height:this.height-2*h.offsety,position:"absolute",left:h.offsetx,top:h.offsety}),(s=f.createElement("ul")).id=o.id+"_list",n.appendChild(s),vimeowrap.utils.css(s,{position:"absolute",left:0,right:0}),s.onclick=c,a=new SkinnyScroll(n),r.events.playlist.add(l),r.events.playlistItem.add(u)}},u=d,g=f,w={extend:function(t,e){for(var i in e)t[i]=e[i];return t},query:function(t,e){return"string"!=typeof t?null:(e=e||g).querySelector(t)},clamp:function(t,e,i){return t<e?e:i<t?i:t},append:function(t,e,i){var n=g.createElement(i||"div");return w.css(n,e),t.appendChild(n)},bind:function(t,e){return function(){t.apply(e,[].slice.call(arguments))}},invoke:function(t,e){for(var i=slice.call(arguments,2),n=0;n<t.length;n++)t[n][e].apply(t[n],i)},on:function(t,e,i){for(var n=e.split(" "),s=0;s<n.length;s++)t.attachEvent?t.attachEvent("on"+n[s],i):t.addEventListener(n[s],i,!1)},off:function(t,e,i){for(var n=e.split(" "),s=0;s<n.length;s++)t.detachEvent?t.detachEvent("on"+n[s],i):t.removeEventListener(n[s],i,!1)},css:function(t,e){for(var i in e)try{t.style[w.camel(i)]=w.addUnit(e[i])}catch(t){}},camel:function(t){return(""+t).replace(/-(\w)/g,function(t,e){return e.toUpperCase()})},addUnit:function(t){return"string"==typeof t?t:t+"px"},getPointer:function(t){var e=t.pageX,i=t.pageY;if(t.touches&&t.touches.length&&(e=t.touches[0].pageX,i=t.touches[0].pageY),null==e){var n=g.documentElement,s=g.body;e=t.clientX+(n.scrollLeft||s.scrollLeft||0)-(n.clientLeft||s.clientLeft||0),i=t.clientY+(n.scrollTop||s.scrollTop||0)-(n.clientTop||s.clientTop||0)}return{x:e,y:i}},getOffset:function(t){var e=g.documentElement,i=t.getBoundingClientRect(t);return{top:i.top+(u.pageYOffset||e.scrollTop)-(e.clientTop||0),left:i.left+(u.pageXOffset||e.scrollLeft)-(e.clientLeft||0)}},lerp:function(t,e,i){return e+(i-e)*t},norm:function(t,e,i){return(t-e)/(i-e)},map:function(t,e,i,n,s){return w.lerp(w.norm(t,e,i),n,s)}},i.defaults={color:"#fff",radius:6,width:6},i.prototype.y=function(t){this.page.morph.set("y",t)},i.prototype.redraw=function(){this.height=this.el.offsetHeight,this.page.redraw(),this.sbar.redraw()},i.prototype.destroy=function(){w.invoke(this.controllers,"destroy"),w.off(u,"resize",this._redraw),this.sbar.destroy()},u.SkinnyScroll=i,y=u,v=(m=g).createElement("div").style,b={extend:function(t,e){for(var i in e)t[i]=e[i];return t},bind:function(t,e){return function(){t.apply(e,[].slice.call(arguments))}},style:function(t,e){return y.getComputedStyle?getComputedStyle(t).getPropertyValue(b.uncamel(e)):t.currentStyle?t.currentStyle[b.camel(e)]:t.style[b.camel(e)]},matrix:function(t){var e=t.match(/\(([-\d., ]+?)\)/)[1].split(", ");return 6==e.length?{x:e[4],y:e[5]}:16==e.length?{x:e[12],y:e[13]}:void 0},contains:function(t,e){for(var i in t)if(t[i]===e)return!0;return!1},query:function(t,e){return"string"!=typeof t?null:(e=e||m).querySelector(t)},vendorPropName:function(t){if(t in v)return t;for(var e=b.camel("-"+t),i=["Moz","Webkit","O","ms"],n=0;n<i.length;n++)if((t=i[n]+e)in v)return t},has3d:function(){var t=b.vendorPropName("transform");return v[t]="",v[t]="rotateY(90deg)",""!==v[t]},on:function(t,e,i){for(var n=e.split(" "),s=0;s<n.length;s++)t.attachEvent?t.attachEvent("on"+n[s],i):t.addEventListener(n[s],i,!1)},off:function(t,e,i){for(var n=e.split(" "),s=0;s<n.length;s++)t.detachEvent?t.detachEvent("on"+n[s],i):t.removeEventListener(n[s],i,!1)},camel:function(t){return(""+t).replace(/-(\w)/g,function(t,e){return e.toUpperCase()})},uncamel:function(t){return(""+t).replace(/([A-Z])/g,"-$1").toLowerCase()},addUnit:function(t){return"string"==typeof t?t:t+"px"},getUnit:function(t){return"string"==typeof t?t.replace(/[-\d\.]/g,""):"px"},num:function(t){return+(""+t).replace(/[^-\d.]/g,"")},lerp:function(t,e,i){return e+(i-e)*t}},e.defaults={duration:500},e.support={transition:b.vendorPropName("transition"),transform:b.vendorPropName("transform"),transform3d:b.has3d()},e.prototype.duration=function(t){return this.engine.duration(t),this},e.prototype.get=function(t){return this.engine.get(t)},e.prototype.set=function(t,e){return this.engine.set(t,e),this},e.prototype.to=function(t,e){return this.engine.to(t,e),this},e.prototype.ease=function(t){return this.engine.ease(t),this},e.prototype.start=function(){return this.engine.start(),this},e.prototype.on=function(t,e){return this.events[t].on(e),this},e.prototype.off=function(t,e){return this.events[t].off(e),this},y.Morph=e,n.prototype.on=function(t,e){return this.c.push({fn:t,c:e}),this},n.prototype.fire=function(){for(var t=[].slice.call(arguments),e=0;e<this.c.length;e++)this.c[e].fn.apply(this.c[e].c||this,t);return this},n.prototype.off=function(t){if(t)for(var e=0;e<this.c.length;e++)this.c[e]===t&&(this.c.splice(e,1),e--);else this.c=[];return this},s.aliases={x:"left",y:"top"},s.prototype.duration=function(t){this._duration=t},s.prototype.get=function(t){return t=s.aliases[t]||t,b.style(this.el,t)},s.prototype.set=function(t,e){b.extend(this._start,this.add(t,e)),this.setProperties(),this.update()},s.prototype.to=function(t,e){b.extend(this._end,this.add(t,e))},s.prototype.add=function(t,e){var i={};for(var n in void 0!==e?i[t]=e:b.extend(i,t),s.aliases)void 0!==i[n]&&(i[s.aliases[n]]=i[n],delete i[n]);return i},s.prototype.setProperties=function(){for(var t in this._start)this.el.style[b.camel(t)]=b.addUnit(this._start[t])},s.prototype.initProperties=function(){for(var t in this._end)this._start[t]||(this._start[t]=b.style(this.el,t)||1)},s.prototype.applyProperties=function(t){for(var e in this._end){var i=this._start[e],n=this._end[e],s=b.lerp(t,b.num(i),b.num(n));this.el.style[b.camel(e)]=s+b.getUnit(n)}},s.prototype.ease=function(t){},s.prototype.start=function(){this.reset(),this.initProperties();var t=this,e=0,i=+new Date;this.id=setInterval(function(){e=1<(e+=(new Date-i)/t._duration)?1:e,i=+new Date,t.applyProperties(e),t.update(),1===e&&t.end()},16)},s.prototype.update=function(){this.main.events.update.fire()},s.prototype.end=function(){clearInterval(this.id),this.main.events.end.fire()},s.prototype.reset=function(){clearInterval(this.id),this._start={}},o.translate=b.has3d?["translate3d(",", 0)"]:["translate(",")"],o.ends=["transitionend","webkitTransitionEnd","oTransitionEnd","MSTransitionEnd"].join(" "),o.aliases={x:{set:function(t,e){t.transformX=o.translate.join(e+", 0")},get:function(t,e){return b.matrix(b.style(t,b.vendorPropName("transform"))).x}},y:{set:function(t,e){t.transformY=o.translate.join("0, "+e)},get:function(t,e){return b.matrix(b.style(t,b.vendorPropName("transform"))).y}}},o.prototype.reset=function(){this._props={},this._transitionProps=[],this._transforms=[],this._ease=""},o.prototype.duration=function(t){this._duration=t},o.prototype.ease=function(t){this._ease=t},o.prototype.setVendorProperty=function(t,e){this._props[b.uncamel(b.vendorPropName(t))]=e},o.prototype.get=function(t){return o.aliases[t]?o.aliases[t].get(this.el,t):b.style(this.el,b.vendorPropName(t))},o.prototype.set=function(t,e){this.duration(0),this.to(t,e),this.start(),this.update()},o.prototype.to=function(t,e){var i=this.add(t,e);for(var n in i)n.match(/^transform/)?(this.transform(i[n]),delete i[n]):(this.transition(n),this._props[n]=i[n])},o.prototype.add=function(t,e){var i={};for(var n in void 0!==e?i[t]=e:b.extend(i,t),i)if(void 0!==o.aliases[n]){var s=b.addUnit(i[n]);o.aliases[n].set(i,s),delete i[n]}return i},o.prototype.transition=function(t){b.contains(this._transitionProps,t)||this._transitionProps.push(t)},o.prototype.transform=function(t){b.contains(this._transforms,t)||this._transforms.push(t)},o.prototype.applyProperties=function(t){for(var e in t)this.el.style.setProperty(e,t[e])},o.prototype.start=function(){this._transforms.length&&(this.setVendorProperty("transform",this._transforms.join(" ")),this.transition(b.uncamel(e.support.transform))),this.setVendorProperty("transition",""),0<this._duration&&(this.setVendorProperty("transition-duration",this._duration+"ms"),this.setVendorProperty("transition-property",this._transitionProps.join(", ")),this.setVendorProperty("transition-timing-function",this._ease),clearInterval(this.id),this.id=setInterval(this._update,16),this.fired=!1,b.on(this.el,o.ends,this._end)),this.applyProperties(this._props),this.reset()},o.prototype.update=function(){this.main.events.update.fire()},o.prototype.end=function(){clearInterval(this.id),b.off(this.el,o.ends,this._end),this.fired||(this.fired=!0,this.main.events.end.fire())},r.prototype.scroll=function(t){if(t=t||u.event,this.page.height>this.main.height){t.preventDefault&&t.preventDefault();var e=t.wheelDelta?-t.wheelDelta/120:t.detail/3;return this.y-=20*e,this.y=w.clamp(this.y,-this.page.height+this.main.height,0),this.page.morph.set("y",this.y),!1}},r.prototype.destroy=function(){w.off(this.main.el,"DOMMouseScroll mousewheel",this._scroll)},h.prototype.update=function(){this.main.events.scroll.fire(this.morph.get("y"))},h.prototype.redraw=function(){this.height=this.el.offsetHeight},a.prototype.lock=function(t){(t=t||u.event).target=t.target||t.srcElement,this.offset=t.target==this.hand?w.getPointer(t).y-w.getOffset(this.hand).top:0,this.dragging=/mousedown|touchstart/.test(t.type),this.drag(t);var e=this.dragging?"on":"off";w[e](g,"mouseup touchend",this._lock),w[e](g,"mousemove touchmove",this._drag),w[e](g,"selectstart",this.stopSelect)},a.prototype.drag=function(t){if(t=t||u.event,this.dragging){t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault();var e=w.getPointer(t).y-w.getOffset(this.sbar).top-this.offset,i=w.map(e,0,this.sbar.offsetHeight-this.hand.offsetHeight,0,this.page.height-this.main.height);return i=w.clamp(i,0,this.page.height-this.main.height),this.page.morph.set("y",-i),!1}},a.prototype.stopSelect=function(){return!1},p.prototype.y=function(t){this._y=t;var e=-parseFloat(t)/this.ratio;isNaN(e)&&(e=0);var i=e+this.handHeight-this.height,n=this.hand.style;0<t?(n.height=Math.max(this.handHeight+e,25)+"px",n.top="0px"):0<i?(n.height=Math.max(this.handHeight-i,25)+"px",n.bottom="0px",n.top="auto"):(n.height=this.handHeight+"px",n.top=e+"px")},p.prototype.redraw=function(){this.el.style.display=this.main.height<this.page.height?"block":"none",this.height=this.el.offsetHeight,this.handHeight=Math.round(Math.max(this.main.height/this.page.height*this.height,25)),this.ratio=(this.page.height-this.main.height)/(this.height-this.handHeight),this.y(this._y||0)},p.prototype.destroy=function(){var t=this.el.parentNode;t&&t.removeChild(this.el)},l.prototype.on=function(t,e){return this.c.push({fn:t,c:e}),this},l.prototype.fire=function(){for(var t=[].slice.call(arguments),e=0;e<this.c.length;e++)this.c[e].fn.apply(this.c[e].c||this,t);return this},l.prototype.off=function(t){if(t)for(var e=0;e<this.c.length;e++)this.c[e]===t&&(this.c.splice(e,1),e--);else this.c=[];return this},c.prototype.handleEvent=function(t){this[t.type](t)},c.prototype.touchstart=function(t){this.main.height<this.page.height&&(this.moved=!1,this.startX=t.touches[0].pageX-this.x,this.startY=t.touches[0].pageY-this.y,w.on(this.page.el,"touchmove",this),w.on(this.page.el,"touchend",this))},c.prototype.touchmove=function(t){this.lastX=this.x,this.lastY=this.y,this.x=t.touches[0].pageX-this.startX,this.y=t.touches[0].pageY-this.startY,1===t.touches.length&&Math.abs(this.y-this.lastY)>Math.abs(this.x-this.lastX)&&(t.preventDefault(),this.moved=!0,this.lastMoveTime=+new Date,this.page.morph.set("y",this.y))},c.prototype.touchend=function(t){if(w.off(this.page.el,"touchmove",this),w.off(this.page.el,"touchend",this),this.moved){t.preventDefault();var e=this.y-this.lastY,i=new Date-this.lastMoveTime+1;this.y=this.y+200*e/i;var n=this.clampY()?500:1e3;this.page.morph.duration(n).to("y",this.y).ease("cubic-bezier(0,0,0.2,1)").start()}},c.prototype.clampY=function(){return 0<=this.y?!(this.y=0):this.y<this.main.height-this.page.height?(this.y=this.main.height-this.page.height,!0):void 0},c.prototype.destroy=function(){w.off(this.page.el,"touchstart",this)}}(window,document);